(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-627168e0"],{"0fb4":function(e,t,a){},1427:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"searchInput"},[a("el-input",{attrs:{placeholder:e.placeholder,clearable:"",type:"text",maxlength:"32","suffix-icon":"el-input__icon el-icon-search"},on:{change:e.onSubmitSearch},nativeOn:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.isIE&&e.onSubmitSearch()}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}})],1)},r=[],i=(a("a9e3"),a("10cb"),a("450d"),a("f3ad")),l=a.n(i),o=a("fa7d"),s={name:"MSearch",components:{"el-input":l.a},props:{placeholder:{type:String,default:"搜索..."},searchText:{type:[String,Number],default:""}},data:function(){return{inputValue:this.searchText,isIE:Object(o["e"])()}},methods:{onSubmitSearch:function(){this.$emit("onHandleSubmitSearch",this.inputValue)}}},c=s,u=(a("4441"),a("2877")),d=Object(u["a"])(c,n,r,!1,null,null,null);t["a"]=d.exports},"2d5e":function(e,t,a){"use strict";var n=a("95cd"),r=a.n(n);r.a},"346f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("article-list")],1)},r=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"reminders-list"},[a("p",{staticClass:"title"},[e._v("文章管理")]),a("m-card",[a("div",{attrs:{slot:"search"},slot:"search"},[a("div",{staticClass:"filterInput"},[a("m-search",{attrs:{searchText:e.filter.title},on:{onHandleSubmitSearch:e.handleSubmitSearch}})],1)]),a("div",{attrs:{slot:"content"},slot:"content"},[a("m-table",{ref:"articleTable",attrs:{rowStyle:{cursor:"pointer"},tableColumns:e.tableColumns,tableData:e.articleList,loading:e.tableLoading,actionWidth:145},on:{rowClick:e.handleRowClick},scopedSlots:e._u([{key:"createdAt",fn:function(t){var a=t.row;return[e._v(" "+e._s(e._f("formatTime")(a.createdAt))+" ")]}},{key:"publishedAt",fn:function(t){var a=t.row;return[e._v(" "+e._s(e._f("formatTime")(a.publishedAt))+" ")]}},{key:"status",fn:function(e){var t=e.row;return[a("table-status",{attrs:{status:t.status&&t.status}})]}},{key:"btnGroup",fn:function(t){var n=t.row;return[a("div",{staticClass:"operation"},[a("edit-button",{attrs:{disabled:"ARTICLE_STATUS_CHECKING"!==n.status},on:{click:function(t){return e.handleAgree(n)}}},[e._v(" 同意 ")]),a("delete-button",{staticClass:"global_button",attrs:{disabled:"ARTICLE_STATUS_CHECKING"!==n.status},on:{click:function(t){return e.openRejectModal(n)}}},[e._v(" 拒绝 ")])],1)]}}])}),a("m-pagination",{attrs:{currentPage:e.pagination.page,pageSize:e.pagination.rows,total:e.pagination.total},on:{onHandleCurrentChange:e.handleCurrentChange}})],1)]),a("reject-dialog",{attrs:{visible:e.rejectDialogVisible,rejectLoading:e.rejectLoading},on:{onHandleReject:e.handleReject,onHandleCloseDialog:e.handleCloseDialog}}),a("article-detail",{ref:"articleDetail",attrs:{articleId:e.currentArticleDetail.id,openDrawer:e.openDrawer},on:{onHandleAgree:e.handleAgree,onOpenRejectModal:e.openRejectModal,onHandleCloseDrawer:e.handleCloseDrawer}})],1)},l=[],o=(a("4de4"),a("96cf"),a("1da1")),s=a("5530"),c=a("2f62"),u=a("b84f"),d=a("3951"),f=a("1427"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.statusLabel?a("div",[a("span",{staticClass:"statusWrapper",class:e.backgroundClass},[e._v(" "+e._s(e.statusLabel)+" ")])]):e._e()},h=[],m={name:"tableStatus",props:{status:{type:String,default:""}},computed:{statusLabel:function(){if(this.status){if("ARTICLE_STATUS_DRAFT"===this.status)return"草稿";if("ARTICLE_STATUS_CHECKING"===this.status)return"待审核";if("ARTICLE_STATUS_REJECT"===this.status)return"拒绝";if("ARTICLE_STATUS_ADOPT"===this.status)return"发布"}return""},backgroundClass:function(){if(this.status){if("ARTICLE_STATUS_DRAFT"===this.status)return"draft";if("ARTICLE_STATUS_CHECKING"===this.status)return"submited";if("ARTICLE_STATUS_REJECT"===this.status)return"rejected";if("ARTICLE_STATUS_ADOPT"===this.status)return"published"}return""}}},b=m,v=(a("491e"),a("2877")),g=Object(v["a"])(b,p,h,!1,null,"4c81e053",null),C=g.exports,_=a("4d86"),w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.visible?a("div",{staticClass:"reject_inputWrapper"},[a("m-dialog",{attrs:{title:"拒绝内容",dialogVisible:e.visible,showClose:!0,dialogWidth:"95%",closeOnClickModal:!1},on:{onHandleClose:e.handleCloseDialog}},[a("div",{staticClass:"content_wrapper",attrs:{slot:"content"},slot:"content"},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px","label-position":"left"}},[a("el-form-item",{attrs:{label:"原因",prop:"comment"}},[a("el-input",{attrs:{type:"textarea",maxlength:"255",rows:4,"show-word-limit":""},model:{value:e.form.comment,callback:function(t){e.$set(e.form,"comment",t)},expression:"form.comment"}})],1)],1)],1),a("div",{staticClass:"action",attrs:{slot:"action"},slot:"action"},[a("delete-button",{attrs:{disabled:!e.form.comment,loading:e.rejectLoading},on:{click:function(t){return e.handleReject("form")}}},[e._v(" 确认拒绝 ")])],1)])],1):e._e()},y=[],A=(a("10cb"),a("450d"),a("f3ad")),T=a.n(A),D=(a("eca7"),a("3787")),S=a.n(D),j=(a("425f"),a("4105")),x=a.n(j),E=a("bf46"),L=a("efde"),O={name:"rejectDialog",components:{"m-dialog":E["a"],deleteButton:L["a"],"el-form":x.a,"el-form-item":S.a,"el-input":T.a},props:{visible:{type:Boolean,default:!1},rejectLoading:{type:Boolean,default:!1}},data:function(){return{form:{comment:""},rules:{comment:[{required:!0,message:"请输入原因",trigger:"blur"}]}}},watch:{visible:function(){this.form.comment=""}},methods:{handleReject:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var a=t.form.comment,n={comment:a};t.$emit("onHandleReject",n)}}))},handleCloseDialog:function(){this.form.comment="",this.$emit("onHandleCloseDialog")}}},R=O,$=(a("965e"),Object(v["a"])(R,w,y,!1,null,"567c75d2",null)),k=$.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("custom-drawer",{staticStyle:{"overflow-y":"'auto'"},attrs:{openDrawer:e.openDrawer,destryAfterClose:!1},on:{beforeClose:e.handleCloseDrawer}},[a("div",{staticClass:"title-wrapper",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"title-desc"},[e._v("文章详情")]),a("div",{staticClass:"title-action"},["ARTICLE_STATUS_CHECKING"===e.articleContent.status?[a("edit-button",{staticClass:"btn",on:{click:function(t){return e.handleAgree(e.articleContent)}}},[e._v(" 同意 ")]),a("delete-button",{staticClass:"btn",on:{click:function(t){return e.openRejectModal(e.articleContent)}}},[e._v(" 拒绝 ")])]:e._e(),a("primary-button",{on:{click:e.handleCloseDrawer}},[e._v("关闭")])],2)]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dataLoading,expression:"dataLoading"}],attrs:{slot:"content",id:"content"},slot:"content"},[a("custom-article-detail",{attrs:{articleDetail:e.articleContent}})],1)])],1)},H=[],B=(a("a9e3"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"drawer-wrapper"},[a("el-drawer",{attrs:{visible:e.openDrawer,direction:e.direction,"before-close":e.handleClose,"destroy-on-close":e.destryAfterClose,"show-close":!1,size:e.width},on:{"update:visible":function(t){e.openDrawer=t}}},[a("div",{attrs:{slot:"title"},slot:"title"},[e._t("title")],2),e._t("content")],2)],1)}),M=[],N=(a("0fb4"),a("9944")),U=a.n(N),V={name:"customDrawer",props:{openDrawer:{type:Boolean,default:!1},direction:{type:String,default:"rtl"},width:{type:[Number,String],default:"40%"},destryAfterClose:{type:Boolean,default:!0}},components:{"el-drawer":U.a},methods:{handleClose:function(){this.$emit("beforeClose")}}},P=V,q=Object(v["a"])(P,B,M,!1,null,null,null),z=q.exports,G=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"article-wrapper ql-snow"},[a("article",{staticClass:"article",attrs:{slot:"leftContent"},slot:"leftContent"},[e._m(0),e.articleDetail.image?a("div",{staticClass:"lazy article-hero thumb"},[a("img",{attrs:{src:e.articleDetail.image,width:"100%",height:"auto"}})]):e._e(),a("h1",{staticClass:"article-title"},[e._v(e._s(e.articleDetail.title))]),a("div",{staticClass:"ql-editor article-content",domProps:{innerHTML:e._s(e.articleDetail.content)}})])])},F=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"author-info-block"},[a("a",{staticClass:"avatar-link",attrs:{href:"#",target:"_blank"}},[a("div",{staticClass:"avatar"})]),a("div",{staticClass:"author-info-box"},[a("a",{staticClass:"username ellipsis",attrs:{target:"_blank"}},[e._v("Tony")]),a("div",{staticClass:"meta-box"},[a("time",{staticClass:"time"},[e._v("2020年03月09日")]),a("span",{staticClass:"views-count"},[e._v("阅读 100")])])])])}],K={name:"customArticleDetail",props:{articleDetail:{type:Object,default:function(){}}}},W=K,J=(a("2d5e"),Object(v["a"])(W,G,F,!1,null,"5784bcd0",null)),X=J.exports,Q={name:"articleDetail",props:{articleId:{type:[String,Number],default:""},openDrawer:{type:Boolean,default:!1}},components:{customDrawer:z,customArticleDetail:X},watch:{articleId:function(e){this.queryArticleDetail(e)}},data:function(){return{articleContent:{},dataLoading:!1}},methods:Object(s["a"])({},Object(c["b"])(["getArticleDetail"]),{handleError:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.message,a=void 0===t?"":t;a&&this.$message.error(a)},queryArticleDetail:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t.dataLoading=!0,a.next=4,t.getArticleDetail(e||t.articleId);case 4:n=a.sent,t.dataLoading=!1,n&&(t.articleContent=n),a.next=13;break;case 9:a.prev=9,a.t0=a["catch"](0),t.dataLoading=!1,t.handleError(a.t0);case 13:case"end":return a.stop()}}),a,null,[[0,9]])})))()},handleAgree:function(e){this.$emit("onHandleAgree",e)},openRejectModal:function(e){this.$emit("onOpenRejectModal",e)},handleCloseDrawer:function(){this.$emit("onHandleCloseDrawer")}})},Y=Q,Z=(a("9202"),Object(v["a"])(Y,I,H,!1,null,"2e1d23ba",null)),ee=Z.exports,te=a("fa7d"),ae={name:"articleList",components:{MTable:u["a"],MCard:d["a"],MSearch:f["a"],tableStatus:C,rejectDialog:k,MPagination:_["a"],articleDetail:ee},computed:Object(s["a"])({},Object(c["e"])({articleList:function(e){return e.article.articleList},pagination:function(e){return e.article.pagination},filter:function(e){return e.filter.filter.article}})),data:function(){return{tableColumns:[{prop:"title",label:"文章标题",slot:!1},{prop:"userId",label:"用户名称",slot:!1},{prop:"categoryId",label:"所属专栏",slot:!1},{prop:"createdAt",label:"创建时间",slot:!0},{prop:"publishedAt",label:"发布时间",slot:!0},{prop:"status",label:"状态",slot:!0}],tableLoading:!1,rejectDialogVisible:!1,rejectLoading:!1,openDrawer:!1,currentArticleDetail:{}}},methods:Object(s["a"])({},Object(c["b"])(["getArticleList","approveArticle"]),{},Object(c["d"])(["CHANGEFILTER"]),{handleError:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.message,a=void 0===t?"":t;a&&this.$message.error(a)},handleSubmitSearch:function(e){this.handlefilterChange("title",e)},handlefilterChange:function(e,t){var a={filterKey:e,filterValue:t,page:"article"},n={page:1};this.CHANGEFILTER(a),this.loadArticleList(n)},handleCurrentChange:function(e){var t={page:e};this.loadArticleList(t)},loadArticleList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(s["a"])({},e,{},this.filter);this.queryArticleList(t)},queryArticleList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,n=Object(s["a"])({page:e.pagination.page,rows:e.pagination.rows,companyId:1},t),e.tableLoading=!0,a.next=5,e.getArticleList(Object(te["b"])(n));case 5:e.tableLoading=!1,a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](0),e.tableLoading=!1;case 11:case"end":return a.stop()}}),a,null,[[0,8]])})))()},handleRowClick:function(e){this.openDrawer=!0,this.currentArticleDetail=Object(s["a"])({},e)},handleCloseDrawer:function(){this.openDrawer=!1},handleAgree:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$confirm("确认通过审核？ 文章将立马发布！","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning",closeOnClickModal:!1});case 3:return n=Object(s["a"])({},e,{status:"ARTICLE_STATUS_ADOPT"}),a.next=6,t.approveArticle(n);case 6:r=a.sent,r&&r.message&&t.$message.success(r.message),t.$refs["articleDetail"]&&t.$refs["articleDetail"].queryArticleDetail(),t.loadArticleList(),a.next=15;break;case 12:a.prev=12,a.t0=a["catch"](0),t.handleError(a.t0);case 15:case"end":return a.stop()}}),a,null,[[0,12]])})))()},openRejectModal:function(e){this.rejectDialogVisible=!0,this.currentArticleDetail=Object(s["a"])({},e)},handleCloseDialog:function(){this.rejectDialogVisible=!1},handleReject:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var n,r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,n=e.comment,r=Object(s["a"])({},t.currentArticleDetail,{refuseReason:n,status:"ARTICLE_STATUS_REJECT"}),t.rejectLoading=!0,a.next=6,t.approveArticle(r);case 6:i=a.sent,i&&i.message&&t.$message.success(i.message),t.$refs["articleDetail"]&&t.$refs["articleDetail"].queryArticleDetail(),t.rejectLoading=!1,t.handleCloseDialog(),t.loadArticleList(),a.next=18;break;case 14:a.prev=14,a.t0=a["catch"](0),t.rejectLoading=!1,t.handleError(a.t0);case 18:case"end":return a.stop()}}),a,null,[[0,14]])})))()}}),created:function(){this.loadArticleList()}},ne=ae,re=Object(v["a"])(ne,i,l,!1,null,null,null),ie=re.exports,le={name:"articleManage",components:{articleList:ie}},oe=le,se=Object(v["a"])(oe,n,r,!1,null,null,null);t["default"]=se.exports},4441:function(e,t,a){"use strict";var n=a("6d48"),r=a.n(n);r.a},"491e":function(e,t,a){"use strict";var n=a("6d70"),r=a.n(n);r.a},"6d48":function(e,t,a){},"6d70":function(e,t,a){},9202:function(e,t,a){"use strict";var n=a("b94c"),r=a.n(n);r.a},"95cd":function(e,t,a){},"965e":function(e,t,a){"use strict";var n=a("b0c6"),r=a.n(n);r.a},9944:function(e,t,a){e.exports=function(e){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/dist/",a(a.s=96)}({0:function(e,t,a){"use strict";function n(e,t,a,n,r,i,l,o){var s,c="function"===typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=a,c._compiled=!0),n&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),l?(s=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(l)},c._ssrRegister=s):r&&(s=o?function(){r.call(this,this.$root.$options.shadowRoot)}:r),s)if(c.functional){c._injectStyles=s;var u=c.render;c.render=function(e,t){return s.call(t),u(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,s):[s]}return{exports:e,options:c}}a.d(t,"a",(function(){return n}))},15:function(e,t){e.exports=a("5128")},32:function(e,t){e.exports=a("e452")},4:function(e,t){e.exports=a("d010")},96:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"el-drawer-fade"},on:{"after-enter":e.afterEnter,"after-leave":e.afterLeave}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-drawer__wrapper",attrs:{tabindex:"-1"}},[a("div",{staticClass:"el-drawer__container",class:e.visible&&"el-drawer__open",attrs:{role:"document",tabindex:"-1"},on:{click:function(t){return t.target!==t.currentTarget?null:e.handleWrapperClick(t)}}},[a("div",{ref:"drawer",staticClass:"el-drawer",class:[e.direction,e.customClass],style:e.isHorizontal?"width: "+e.size:"height: "+e.size,attrs:{"aria-modal":"true","aria-labelledby":"el-drawer__title","aria-label":e.title,role:"dialog",tabindex:"-1"}},[e.withHeader?a("header",{staticClass:"el-drawer__header",attrs:{id:"el-drawer__title"}},[e._t("title",[a("span",{attrs:{role:"heading",tabindex:"0",title:e.title}},[e._v(e._s(e.title))])]),e.showClose?a("button",{staticClass:"el-drawer__close-btn",attrs:{"aria-label":"close "+(e.title||"drawer"),type:"button"},on:{click:e.closeDrawer}},[a("i",{staticClass:"el-dialog__close el-icon el-icon-close"})]):e._e()],2):e._e(),e.rendered?a("section",{staticClass:"el-drawer__body"},[e._t("default")],2):e._e()])])])])},r=[];n._withStripped=!0;var i=a(15),l=a.n(i),o=a(4),s=a.n(o),c=a(32),u=a.n(c),d={name:"ElDrawer",mixins:[l.a,s.a],props:{appendToBody:{type:Boolean,default:!1},beforeClose:{type:Function},customClass:{type:String,default:""},closeOnPressEscape:{type:Boolean,default:!0},destroyOnClose:{type:Boolean,default:!1},modal:{type:Boolean,default:!0},direction:{type:String,default:"rtl",validator:function(e){return-1!==["ltr","rtl","ttb","btt"].indexOf(e)}},modalAppendToBody:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},size:{type:String,default:"30%"},title:{type:String,default:""},visible:{type:Boolean},wrapperClosable:{type:Boolean,default:!0},withHeader:{type:Boolean,default:!0}},computed:{isHorizontal:function(){return"rtl"===this.direction||"ltr"===this.direction}},data:function(){return{closed:!1,prevActiveElement:null}},watch:{visible:function(e){var t=this;e?(this.closed=!1,this.$emit("open"),this.appendToBody&&document.body.appendChild(this.$el),this.prevActiveElement=document.activeElement,this.$nextTick((function(){u.a.focusFirstDescendant(t.$refs.drawer)}))):(this.closed||this.$emit("close"),this.$nextTick((function(){t.prevActiveElement&&t.prevActiveElement.focus()})))}},methods:{afterEnter:function(){this.$emit("opened")},afterLeave:function(){this.$emit("closed")},hide:function(e){!1!==e&&(this.$emit("update:visible",!1),this.$emit("close"),!0===this.destroyOnClose&&(this.rendered=!1),this.closed=!0)},handleWrapperClick:function(){this.wrapperClosable&&this.closeDrawer()},closeDrawer:function(){"function"===typeof this.beforeClose?this.beforeClose(this.hide):this.hide()},handleClose:function(){this.closeDrawer()}},mounted:function(){this.visible&&(this.rendered=!0,this.open())},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}},f=d,p=a(0),h=Object(p["a"])(f,n,r,!1,null,null,null);h.options.__file="packages/drawer/src/main.vue";var m=h.exports;m.install=function(e){e.component(m.name,m)};t["default"]=m}})},b0c6:function(e,t,a){},b94c:function(e,t,a){}}]);